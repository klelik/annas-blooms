query getProducts(
  $after: String
  $slug: [String]
  $first: Int = 100
  $orderby: [ProductsOrderbyInput] = { field: DATE, order: DESC }
) {
  products(
    first: $first
    after: $after
    where: {
      categoryIn: $slug
      typeNotIn: EXTERNAL
      visibility: VISIBLE
      minPrice: 0
      orderby: $orderby
    }
  ) {
    pageInfo {
      hasNextPage
      endCursor
    }
    nodes {
      databaseId
      slug
      name
      type: __typename

      image {
        sourceUrl(size: WOOCOMMERCE_THUMBNAIL)
        altText
      }

      productCategories(first: 3) {
        nodes {
          slug
          name
        }
      }

      ... on SimpleProduct {
        onSale
        price
        salePrice
        regularPrice
        averageRating
      }

      ... on VariableProduct {
        onSale
        price
        salePrice
        regularPrice
        averageRating
      }

      ... on ExternalProduct {
        price
        averageRating
      }

      ... on GroupProduct {
        price
        averageRating
      }
    }
  }
}
